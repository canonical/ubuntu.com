<div class="u-fixed-width">
  {% if current_page and total_pages and total_pages > 1 %}
    <ol class="p-pagination u-align--center">
      <li class="p-pagination__item">
        {% if current_page > 1 %}
          {% if limit %}
            <a href="?{{ modify_query({'offset': offset - limit}) }}" class="p-pagination__link--previous">
              <i class="p-icon--chevron-down">Previous page</i>
            </a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page - 1}) }}" class="p-pagination__link--previous">
              <i class="p-icon--chevron-down">Previous page</i>
            </a>
          {% endif %}
        {% else %}
        <span class="p-pagination__link--previous is-disabled">
          <i class="p-icon--chevron-down">Previous page</i>
        </span>
        {% endif %}
      </li>

      {# always show 5 pages in pagination #}
      {% if current_page > 4 and current_page == total_pages %}
        <li class="p-pagination__item">
          {% if limit %}
            <a href="?{{ modify_query({'offset': (current_page - 5) * limit}) }}" class="p-pagination__link">{{ current_page - 4 }}</a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page - 4}) }}" class="p-pagination__link">{{ current_page - 4 }}</a>
          {% endif %}  
        </li>
      {% endif %}

      {% if current_page > 3 and current_page == total_pages %}
        <li class="p-pagination__item">
          {% if limit %}
            <a href="?{{ modify_query({'offset': (current_page - 4) * limit}) }}" class="p-pagination__link">{{ current_page - 3 }}</a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page - 3}) }}" class="p-pagination__link">{{ current_page - 3 }}</a>
          {% endif %}
          </li>
      {% endif %}

      {% if current_page > 2 %}
        <li class="p-pagination__item">
          {% if limit %}
            <a href="?{{ modify_query({'offset': (current_page - 3) * limit}) }}" class="p-pagination__link">{{ current_page - 2 }}</a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page - 2}) }}" class="p-pagination__link">{{ current_page - 2 }}</a>
          {% endif %}
          </li>
      {% endif %}

      {% if current_page > 1 %}
        <li class="p-pagination__item">
          {% if limit %}
            <a href="?{{ modify_query({'offset': (current_page - 2) * limit}) }}" class="p-pagination__link">{{ current_page - 1 }}</a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page - 1}) }}" class="p-pagination__link">{{ current_page - 1 }}</a>
          {% endif %}
          </li>
      {% endif %}

      {# current current_page #}
      <li class="p-pagination__item">
        {% if limit %}
          <a href="?{{ modify_query({'offset': current_page - 1}) }}" class="p-pagination__link is-active">{{ current_page }}</a>
        {% else %}
          <a href="?{{ modify_query({'page': current_page }) }}" class="p-pagination__link is-active">{{ current_page }}</a>
        {% endif %}
        </li>

      {% if current_page < total_pages %}
        <li class="p-pagination__item">
          {% if limit %}
            <a href="?{{ modify_query({'offset': current_page * limit}) }}" class="p-pagination__link">{{ current_page + 1 }}</a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page + 1}) }}" class="p-pagination__link">{{ current_page + 1 }}</a>
          {% endif %}
          </li>
      {% endif %}

      {% if current_page < total_pages - 1 %}
        <li class="p-pagination__item">
          {% if limit %}
            <a href="?{{ modify_query({'offset': (current_page + 1) * limit}) }}" class="p-pagination__link">{{ current_page + 2 }}</a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page + 2}) }}" class="p-pagination__link">{{ current_page + 2 }}</a>
          {% endif %}
          </li>
      {% endif %}

      {% if current_page < total_pages - 2 and current_page == 1 %}
        <li class="p-pagination__item">
          {% if limit %}
            <a href="?{{ modify_query({'offset': (current_page + 2) * limit}) }}" class="p-pagination__link">{{ current_page + 3 }}</a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page + 3}) }}" class="p-pagination__link">{{ current_page + 3 }}</a>
          {% endif %}
          </li>
      {% endif %}

      {% if current_page < total_pages - 3 and current_page == 1 %}
        <li class="p-pagination__item">
          {% if limit %}
            <a href="?{{ modify_query({'offset': (current_page + 3) * limit}) }}" class="p-pagination__link">{{ current_page + 4 }}</a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page + 4}) }}" class="p-pagination__link">{{ current_page + 4 }}</a>
          {% endif %}
          </li>
      {% endif %}

      {% if current_page < total_pages - 3 and current_page == 2 %}
        <li class="p-pagination__item">
          {% if limit %}
            <a href="?{{ modify_query({'offset': (current_page + 2) * limit}) }}" class="p-pagination__link">{{ current_page + 3 }}</a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page + 3}) }}" class="p-pagination__link">{{ current_page + 3 }}</a>
          {% endif %}
          </li>
      {% endif %}

      <li class="p-pagination__item">
        {% if current_page != total_pages %}
          {% if limit %}
            <a href="?{{ modify_query({'offset': current_page * limit}) }}" class="p-pagination__link--next">
              <i class="p-icon--chevron-down">Next page</i>
            </a>
          {% else %}
            <a href="?{{ modify_query({'page': current_page + 1}) }}" class="p-pagination__link--next">
              <i class="p-icon--chevron-down">Next page</i>
            </a>
          {% endif %}
        {% else %}
        <span class="p-pagination__link--next is-disabled">
          <i class="p-icon--chevron-down">Next page</i>
        </span>
        {% endif %}
      </li>
    </ol>
  {% endif %}
</div>
