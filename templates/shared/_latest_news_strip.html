<noscript>
  <section class="{% if section_classes %}{{ section_classes }}{% else %}p-strip{% endif %}">
    <div class="row">
      <h3><a href="/blog{% if tag_name %}/tag/{{ tag_name }}{% endif %}">Read the latest {{ heading_topic }} news on our blog&nbsp;&rsaquo;</a></h3>
    </div>
  </section>
</noscript>

<section class="u-hide {% if section_classes %}{{ section_classes }}{% else %}p-strip{% endif %}" data-js="latest-news">
  <div class="row">
    <h3>
      {% if request.path == "/observability" %}
        More about {{ heading_topic }} in
      {% else %}
        Latest {{ heading_topic }} news from
      {% endif %}
        <a href="/blog{% if tag_name %}/tag/{{ tag_name }}{% endif %}" onclick="dataLayer.push({'event' : 'GAEvent', 'eventCategory' : 'blog', 'eventAction' : 'clicks blog feed link', 'eventLabel' : 'ubuntu.com{% if tag_name %}/{{ tag_name }}{% else %} homepage{% endif %}', 'eventValue' : undefined });">
          our blog&nbsp;&rsaquo;
        </a>
    </h3>
  </div>
  <div class="row p-divider">
    <div class="{% if spotlight %}col-9{% else %}col-12{% endif %}">
      <div id="horizontal-latest-articles" class="row">
        <div style="min-height: 9.1rem"><i class="p-icon--spinner u-animation--spin">Loading...</i></div>
      </div>
    </div>
    {% if spotlight %}
    <div id="spotlight" class="col-3 p-divider__block">
    </div>
    {% endif %}
  </div>

  <template style="display:none" id="horizontal-articles-template">
    <div class="col-3">
      <p class="u-no-margin--bottom p-muted-heading"><time datetime="" class="article-time"></time></p>
      <h2 class="p-heading--5"><a class="article-link article-title"></a></h2>
    </div>
  </template>

  {% if spotlight %}
  <template style="display:none" id="spotlight-template">
    <div>
      <p class="u-no-margin--bottom p-muted-heading">
        Spotlight
      </p>
      <h2 class="p-heading--5">
        <a class="article-link article-title"></a>
      </h2>
    </div>
  </template>
  {% endif %}

  <script src="{{ versioned_static('js/dist/latest-news.js') }}"></script>
  <script>
    canonicalLatestNews.fetchLatestNews(
    {
      articlesContainerSelector: "#horizontal-latest-articles",
      articleTemplateSelector: "#horizontal-articles-template",
      {% if spotlight %}spotlightContainerSelector: "#spotlight",
      spotlightTemplateSelector: "#spotlight-template",{% endif %}
      gtmEventLabel: "ubuntu.com{% if tag_name %}/{{ tag_name }}{% else %} homepage{% endif %}",
      {% if tag_name %}tagId: "{{ tag_id }}",{% endif %}
      {% if limit %}limit: "{{ limit }}",{% endif %}
    }
    )
  </script>
</section>
