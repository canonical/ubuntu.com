<section class="p-strip">
  <div class="row">
    <div class="col-8">
      <h1>Register your interest for the OpenJDK for FIPS beta</h1>
      <p class="p-heading--4">In 2017, Canonical launched the Ubuntu FIPS programme to enable Linux workloads for US government regulated and high security environments, and now we are extending its coverage to Java workloads. This programme will give Ubuntu users free access to OpenJDK designed to comply with the FIPS requirements for beta testing for a 3 month period &ndash; please register your interest below to learn more.</p>
    </div>
  </div>
  <div class="row">
    <div class="col-8">
      <form action="/marketo/submit" method="post" id="mktoForm_{{formid}}" >
        <fieldset class="u-no-margin--bottom fieldset">
          <h3 class="p-heading--5">Which Ubuntu LTS are you using?</h3>
          <div class="row u-no-padding">
            <div class="col-4 u-sv3">
              <label class="p-checkbox">
                <input type="checkbox" aria-labelledby="security-fips-xenial" class="p-checkbox__input">
                <span class="p-checkbox__label" id="security-fips-xenial">16.04 (Xenial)</span>
              </label>

            </div>
            <div class="col-4 u-sv3">
              <label class="p-checkbox">
                <input type="checkbox" aria-labelledby="security-fips-bionic" class="p-checkbox__input">
                <span class="p-checkbox__label" id="security-fips-bionic">18.04 (Bionic)</span>
              </label>

            </div>
            <div class="col-4 u-sv3">
              <label class="p-checkbox">
                <input type="checkbox" aria-labelledby="security-fips-focal" class="p-checkbox__input">
                <span class="p-checkbox__label" id="security-fips-focal">20.04 (Focal)</span>
              </label>

            </div>
          </div>
        </fieldset>
        <fieldset class="u-no-margin--bottom fieldset">
          <h3 class="p-heading--5">Do you use any of the packages below?</h3>
          <div class="row u-no-padding">
            <div class="col-6">
              <label class="p-checkbox">
                <input type="checkbox" aria-labelledby="security-fips-tomcat" class="p-checkbox__input">
                <span class="p-checkbox__label" id="security-fips-tomcat">tomcat</span>
              </label>

              <div class="js-other-container">
                <label class="p-checkbox">
                  <input class="p-checkbox__input js-other-container__checkbox" type="checkbox" aria-labelledby="security-fips-other">
                  <span class="p-checkbox__label" id="security-fips-other">Other</span>
                </label>
                <input type="text" id="security-fips-other-specified" class="js-other-container__input" placeholder="Please specify" style="margin-top: .25rem; visibility: hidden" aria-label="Other workloads">
              </div>
            </div>
          </div>
        </fieldset>
        <fieldset class="u-no-margin--bottom fieldset">
          <h3 class="p-heading--5">Which Java runtime do your applications depend on?</h3>
          <div class="row u-no-padding">
            <div class="col-4 u-sv3">
              <label class="p-checkbox">
                <input type="checkbox" aria-labelledby="security-fips-openjdk-8" class="p-checkbox__input">
                <span class="p-checkbox__label" id="security-fips-openjdk-8">OpenJDK-8</span>
              </label>

            </div>
            <div class="col-4 u-sv3">
              <label class="p-checkbox">
                <input type="checkbox" aria-labelledby="security-fips-openjdk-11" class="p-checkbox__input">
                <span class="p-checkbox__label" id="security-fips-openjdk-11">OpenJDK-11</span>
              </label>

            </div>
            <div class="col-4 u-sv3">
              <label class="p-checkbox">
                <input type="checkbox" aria-labelledby="security-fips-openjdk-16" class="p-checkbox__input">
                <span class="p-checkbox__label" id="security-fips-openjdk-16">OpenJDK-16</span>
              </label>

            </div>
          </div>
        </fieldset>
        <fieldset class="u-no-margin--bottom">
          <h3 class="p-heading--5">How should we get in touch?</h3>
          <div class="row u-no-padding">
            <div class="col-6">
              <ul class="p-list">
                <li class="p-list__item">
                  <label for="firstName">First name:</label>
                  <input required id="firstName" name="firstName" maxlength="255" type="text" required="required" />
                </li>
                <li class="p-list__item">
                  <label for="lastName">Last name:</label>
                  <input required id="lastName" name="lastName" maxlength="255" type="text" required="required" />
                </li>
                <li class="p-list__item">
                  <label for="email">Work email:</label>
                  <input required id="email" name="email" maxlength="255" type="email" pattern="^[^ ]+@[^ ]+\.[a-z]{2,26}$" required="required" />
                </li>
                <li class="p-list__item">
                  <label for="phone">Mobile/cell phone number:</label>
                  <input required id="phone" name="phone" maxlength="255" type="tel" required="required" />
                </li>
                <li class="p-list__item">
                  <label class="p-checkbox">
                    <input class="p-checkbox__input" value="yes" aria-labelledby="canonicalUpdatesOptIn" name="canonicalUpdatesOptIn" type="checkbox">
                    <span class="p-checkbox__label" id="canonicalUpdatesOptIn">I agree to receive information about Canonical's products and services.</span>
                  </label>
                </li>
                <li class="p-list__item">In submitting this form, I confirm that I have read and agree to <a href="/legal/data-privacy/contact">Canonical's Privacy Notice</a> and <a href="/legal/data-privacy">Privacy Policy</a>.</li>
                {# These are honey pot fields to catch bots #}
                <li class="u-off-screen">
                  <label class="website" for="website">Website:</label>
                  <input name="website" type="text" class="website" autocomplete="off" value="" id="website" tabindex="-1" />
                </li>
                <li class="u-off-screen">
                  <label class="name" for="name">Name:</label>
                  <input name="name" type="text" class="name" autocomplete="off" value="" id="name" tabindex="-1" />
                </li>
                {# End of honey pots #}
              </ul>
              <!-- hidden fields -->
              <div class="u-hide">
                <h3>Your comments</h3>
                <ul class="p-list">
                  <li class=" p-list__item">
                    <label for="Comments_from_lead__c">What would you like to talk to us about?</label>
                    <textarea id="Comments_from_lead__c" name="Comments_from_lead__c" rows="5" maxlength="2000"></textarea>
                  </li>
                </ul>
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="formid" value="{{formid}}" />
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="returnURL" value="{{returnURL}}" />
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="Consent_to_Processing__c" value="yes" />
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_campaign" id="utm_campaign" value="" />
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_medium" id="utm_medium" value="" />
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_source" id="utm_source" value="" />
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_content" id="utm_content" value="" />
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="utm_term" id="utm_term" value="" />
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="GCLID__c" id="GCLID__c" value="" />
                <input type="hidden" aria-hidden="true" aria-label="hidden field" name="Facebook_Click_ID__c" id="Facebook_Click_ID__c" value="" />
              </div>
              <ul class="p-list">
                <li class="p-list__item">
                  <button type="submit" class="p-button--positive" onclick="dataLayer.push({'event' : 'GAEvent', 'eventCategory' : 'Form', 'eventAction' : 'cloud contact-us', 'eventLabel' : '{{product}}', 'eventValue' : undefined });">Submit</button>
                </li>
              </ul>
            </div>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</section>

<script>
  var otherContainers = document.querySelectorAll(".js-other-container");
  var comment = document.querySelector("#Comments_from_lead__c");

  otherContainers.forEach(function (otherContainer) {
    var checkbox = otherContainer.querySelector(
    ".js-other-container__checkbox"
    );
    var input = otherContainer.querySelector(".js-other-container__input");
    checkbox.addEventListener("change", function (e) {

      if (e.target.checked) {
        input.style.visibility = "visible"
        input.focus();
      } else {
        input.style.visibility = "hidden"
        input.value = "";
      }
    });
  });

  mktoForm_4208.addEventListener('submit', function(e) {
    e.preventDefault();
    comment.value = createMessage();
    this.submit();
  });


  // Concatinate the options selected into a string
  function createMessage() {
    var message = "";

    var formFields = document.querySelectorAll(".fieldset");

    formFields.forEach(function (formField) {
      var comma = "";
      var fieldTitle = formField.querySelector(".p-heading--5");
      var inputs = formField.querySelectorAll("input, textarea");

      if (fieldTitle) {
        message += fieldTitle.innerText + "\r\n";
      }

      inputs.forEach(function (input) {
        switch (input.type) {
          case "radio":
          if (input.checked) {
            message += comma + input.value + "\r\n\r\n";
            comma = ", ";
          }
          break;
          case "checkbox":
          if (input.checked) {
            var subSectionText = "";
            var subSection = input
            .closest('[class*="col-"]')
            .querySelector(".js-sub-section");
            if (subSection) {
              subSectionText = subSection.innerText + ": ";
            }

            var label = formField.querySelector(
            "label[for=" + input.id + "]"
            );
            if (label) {
              label = subSectionText + label.innerText;
            } else {
              label = input.id;
            }
            message += comma + label + "\r\n\r\n";
            comma = ", ";
          }
          break;
          case "text":
          if (input.value !== "") {
            message += comma + input.value + "\r\n\r\n";
            comma = ", ";
          }
          break;
          case "number":
          if (input.value !== "") {
            message += comma + input.value + "\r\n\r\n";
            comma = ", ";
          }
          break;
          case "textarea":
          if (input.value !== "") {
            message += comma + input.value + "\r\n\r\n";
            comma = ", ";
          }
          break;
        }
      });
    });

    return message;
  }
</script>
