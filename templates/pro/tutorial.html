{% extends "templates/base.html" %}

{% block title %}Get started with Ubuntu Pro{% endblock %}

{% block meta_copydoc %}https://docs.google.com/document/d/1GFVENQ9g5U4FSyqZHboXVEQ_RHKxRSwq3NC9PWrwURs/edit{% endblock
meta_copydoc %}

{% block outer_content %}
{% block content %}
<section class="p-strip is-deep">
  <div class="row">
    <div class="col-9 col-medium-5 col-start-large-4">
      <h1 class="p-heading--2">Get started with Ubuntu Pro</h1>
    </div>
  </div>
</section>
<section class="p-strip u-no-padding--top">
  <hr class="is-fixed-width u-no-margin--bottom">
  <div class="row">
    <div class="col-3 col-medium-1">
      <h2 class="p-text--small-caps u-align-text--x-small-to-default">Overview</h2>
    </div>
    <div class="col-9 col-medium-5">
      <p>New to Ubuntu Pro? This how-to guide will help you understand how to activate your Ubuntu Pro subscription and
        choose which services to enable. Together, we will identify security updates that are uniquely available with an
        Ubuntu Pro subscription, and we will apply fixes.</p>

      <p>We will start by getting a free, personal subscription. Then we will attach this subscription to your existing
        Ubuntu LTS machine.</p>

      <p>
        <a href="/pro">Want to learn more about the benefits of Ubuntu Pro before moving on?</a>
      </p>

      <h2>What you'll learn</h2>
      <ol class="p-list--divided has-bullets">
        <li class="p-list__item">
          <span class="u-max-width">
            What Ubuntu Pro is and how to use it
          </span>
        </li>
        <li class="p-list__item">
          <span class="u-max-width">
            How to check the source of your installed packages
          </span>
        </li>
        <li class="p-list__item">
          <span class="u-max-width">
            How to attach an Ubuntu Pro subscription to your existing Ubuntu LTS machine
          </span>
        </li>
        <li class="p-list__item">
          <span class="u-max-width">
            How to check for and apply security updates on your Ubuntu machine, including security updates for Ubuntu
            Universe packages which are only available with Ubuntu Pro
          </span>
        </li>
      </ol>

      <h2>What you'll need</h2>
      <ol class="p-list--divided has-bullets">
        <li class="p-list__item">
          <span class="u-max-width">
            An Ubuntu machine running 16.04 LTS, 18.04 LTS, 20.04 LTS or 22.04 LTS
          </span>
        </li>
        <li class="p-list__item">
          <span class="u-max-width">
            Sudo access
          </span>
        </li>
        <li class="p-list__item">
          <span class="u-max-width">
            An email address, or an existing Ubuntu One account
          </span>
        </li>
        <li class="p-list__item">
          <span class="u-max-width">
            Ubuntu Pro client version 27.13.1 or newer
          </span>
        </li>
      </ol>
    </div>
  </div>
</section>
<section class="p-strip u-no-padding--top">
  <hr class="is-fixed-width u-no-margin--bottom">
  <div class="row">
    <div class="col-3 col-medium-1">
      <p class="p-step-counter">
        1
      </p>
    </div>
    <div class="col-9 col-medium-5">
      <h2>Before we start</h2>
      <ol class="p-list--divided has-bullets">
        <li class="p-list__item">
          Make sure that you are up to date:

          <div class="p-code-snippet">
            <pre class="p-code-snippet__block">$ sudo apt update && sudo apt upgrade</pre>
          </div>
        </li>

        <li class="p-list__item">
          Ensure that you're running the latest version of the pro client:
          <div class="p-code-snippet">
            <pre class="p-code-snippet__block">$ pro --version<br/>27.13.1~20.04.1</pre>
          </div>
        </li>
      </ol>
      <p>I can see that I am running version 27.13.1, so no need to update. If you run a previous version of the client,
        you have two options:</p>
      <ul class="p-list--divided has-bullets">
        <li class="p-list__item">You could wait for the pro client update, which is now released and phased to get to all Ubuntu machines, or
        </li>
        <li class="p-list__item">Consider bypassing the update phasing and install the latest client version using the following command:
          <div class="p-code-snippet">
            <pre class="p-code-snippet__block">$ sudo apt install ubuntu-advantage-tools</pre>
          </div>
        </li>
        <li class="p-list__item">
          <p>When you get the latest client, run apt update again to make sure all package data is up to date.</p>
          <div class="p-code-snippet">
            <pre class="p-code-snippet__block">$ sudo apt update</pre>
          </div>
        </li>
      </ul>
    </div>
  </div>
</section>
<section class="p-strip u-no-padding--top">
  <hr class="is-fixed-width u-no-margin--bottom">
  <div class="row">
    <div class="col-3 col-medium-1">
      <p class="p-step-counter">
        2
      </p>
    </div>
    <div class="col-9 col-medium-5">
      <div class="p-strip is-shallow u-no-padding--top">
        <h2>Identify the source repository of your installed packages</h2>
        <p>First, let's find out how many deb packages are installed on your machine and from which source:</p>
      </div>
      <div class="p-code-snippet">
        <pre class="p-code-snippet__block">
$ pro security-status
1919 packages installed:
    1870 packages from Ubuntu Main/Restricted repository
    10 packages from Ubuntu Universe/Multiverse repository
    10 package from a third party
    29 packages no longer available for download

To get more information about the packages, run
	  pro security-status --help
for a list of available options.

This machine is receiving security patching for Ubuntu Main/Restricted
repository until 2025.
This machine is NOT attached to an Ubuntu Pro subscription.

Ubuntu Pro with 'esm-infra' enabled provides security updates for
Main/Restricted packages until 2030.

Ubuntu Pro with 'esm-apps' enabled provides security updates for
Universe/Multiverse packages until 2030 and has 1 pending security update.

Try Ubuntu Pro with a free personal subscription on up to 5 machines.</pre>
      </div>
      <p>
        OK, so there are 1919 deb packages installed on your machine.
      </p>
      <ul class="p-list--divided has-bullets">
        <li class="p-list__item">
          <span class="u-max-width">
            1870 packages are from Ubuntu Main/ Restricted repository which means that they receive Ubuntu LTS updates
            until 2025. This is covered without any subscription but can be expanded with Ubuntu Pro for an additional 5
            years, until 2030.
          </span>
        </li>
        <li class="p-list__item">
          <span class="u-max-width">
            10 packages are from Ubuntu Universe/ Multiverse repository and they come with no security assurance from
            Ubuntu LTS, but they are covered by Ubuntu Pro.
          </span>
        </li>
        <li class="p-list__item">
          <span class="u-max-width">
            And there is 1 security update for the Universe repository available with an Ubuntu Pro subscription.
          </span>
        </li>
      </ul>

      <p>Note: if you're currently not using any packages from the Ubuntu Universe repository, that line will not be
        displayed.</p>
      <p>To see the list of packages covered with esm-apps and to identify which packages have pending CVE fixes, run:
      </p>
      <div class="p-code-snippet">
        <pre class="p-code-snippet__block">
$ pro security-status --esm-apps
1919 packages installed:
	10 packages from Ubuntu Universe/Multiverse repository

Ubuntu Pro with 'esm-apps' enabled provides security updates for
Universe/Multiverse packages until 2030 and has 1 pending security update.

Run 'pro help esm-apps' to learn more

Package names in bold currently have an available update
with 'esm-apps' enabled
Packages:
<strong>ansible</strong> python3-argcomplete python3-kerberos python3-libcloud
python3-ntlm-auth python3-requests-kerberos python3-requests-ntlm
python3-selinux python3-winrm python3-xmltodict

For example, run:
	apt-cache policy ansible
to learn more about that package.</pre>
      </div>
      <p>From the output we identify the list of all packages installed from the Universe repository, and we know that
        the CVE updated concerns ansible.</p>
      <p>Alternatively, if you know the CVE number you want to check, the pro fix command can tell you if the machine is
        vulnerable or not. As an example, let's check for the CVE-2021-3583, run:</p>
      <div class="p-code-snippet">
        <pre class="p-code-snippet__block">
$ pro fix CVE-2021-3583
CVE-2021-3583:
A flaw was found in Ansible, where a user's controller is vulnerable to
template injection. This issue can occur through facts used in the template
if the user is trying to put templates in multi-line YAML strings and the
facts being handled do not routinely include special template characters.
This flaw allows attackers to perform command injection, which discloses
sensitive information. The highest threat from this vulnerability is to
confidentiality and integrity.
https://ubuntu.com/security/CVE-2021-3583
1 affected source package is installed: ansible
(1/1) ansible:
A fix is available in Ubuntu Pro with `esm-apps` enabled.
The update is not installed because this system is not attached to a subscription.

Choose: [S]ubscribe at ubuntu.com [A]ttach existing token [C]ancel</pre>
      </div>
      <p>To fix that we need an Ubuntu Pro subscription. Let's get one!</p>
    </div>
  </div>
</section>
<section class="p-strip u-no-padding--top">
  <hr class="is-fixed-width u-no-margin--bottom">
  <div class="row">
    <div class="col-3 col-medium-1">
      <p class="p-step-counter">
        3
      </p>
    </div>
    <div class="col-9 col-medium-5">
      <h2>Get your free Ubuntu Pro subscription</h2>
      <ol class="p-list--divided has-bullets">
        <li class="p-list__item">
          <div class="u-max-width p-strip is-shallow u-no-padding--top">
            <h3 class="p-heading--5 u-sv-1 u-no-margin--bottom">
              Create an Ubuntu One account
            </h3>
            <p>
              If you do not already have an Ubuntu One account, <a href="/login">create one</a> - Ubuntu One is the
              single account you use to log in to all services and sites related to Ubuntu, including the Ubuntu Pro
              which is free of charge for personal use on up to 5 machines. For enterprise use-cases go to <a
                href="/pro/subscribe">ubuntu.com/pro/subscribe</a> or <a href="/contact-us/form?product=pro">contact
                us.</a>
            </p>
            <img class="has-shadow" src="https://assets.ubuntu.com/v1/3acd405b-login.ubuntu.com_+login+%281%29.jpg"
              alt="" style="width: 100%; max-width: 35rem">
          </div>
        </li>
        <li class="p-list__item">
          <h3 class="p-heading--5 u-sv-1 u-no-margin--bottom">
            Confirm the email address
          </h3>
          <p>
            Simply click the link provided in the email:
          </p>
          <div class="p-card">
            <p class="u-max-width">
              Hello
              <br>
              Welcome to your new Ubuntu One account.
              <br>
              You can log in right away and start using your new account.
              <br>
              Please take a moment to confirm your email address with us.
              <br>
              To confirm your email address, please click on the link below:
              <br>
              <a
                href="#">https://login.ubuntu.com/Luz1w0n37tidpgi6/token/{YOUR_TOKEN_HERE}/+newemail/{YOUR_EMAIL_HERE}</a>
              <br>
              Thank you,
              <br>
              The Ubuntu One team
              https://login.ubuntu.com
              <br>

              If you don't know what this is about, then someone has probably entered your email address by mistake.
              Sorry about that.
              Use the following link only if you wish to report this email being incorrectly used:
              <br>
              <a href="#">https://login.ubuntu.com/invalidate-email/{YOUR_TOKEN_HERE}/{YOUR_EMAIL_HERE}</a>
              <br>
              You can also seek further assistance on:
              <br>
              https://help.ubuntu.com/community/SSO/FAQs
            </p>
          </div>
        </li>
        <li class="p-list__item">
          <div class="p-strip is-shallow u-no-padding--top">
            <h3 class="p-heading--5 u-sv-1 u-no-margin--bottom">
              Retrieve the token:
            </h3>
            <div class="p-strip is-shallow u-no-padding--top">
              <p>You will be automatically redirected to your Ubuntu Pro dashboard (ubuntu.com/pro/dashboard); an
                additional Google captcha confirmation step might be required.
                Your Ubuntu Pro token will be listed under 'Free Personal Token'
              </p>
            </div>
            <img class="has-shadow" src="https://assets.ubuntu.com/v1/3b5ebbf2-UA+scr+3.jpg" alt=""
              style="width: 100%; max-width: 81rem">
          </div>
        </li>
      </ol>
    </div>
  </div>
</section>
<section class="p-strip u-no-padding--top">
  <hr class="is-fixed-width u-no-margin--bottom">
  <div class="row">
    <div class="col-3 col-medium-1">
      <p class="p-step-counter">
        4
      </p>
    </div>
    <div class="col-9 col-medium-5">
      <div class="p-strip is-shallow u-no-padding--top">
        <h2>Attach your Ubuntu LTS machine to an Ubuntu Pro subscription using the token</h2>
        <p>Now that we have our Ubuntu Pro token, we can attach it to our Ubuntu instance. Open the terminal on your
          Ubuntu LTS, and type the following command:</p>
      </div>
      <div class="p-code-snippet">
        <pre class="p-code-snippet__block--icon"><code>$ sudo pro attach [YOUR_TOKEN]</code></pre>
      </div>
      <p>
        You should see some of the Ubuntu Pro services automatically enabling, while others will remain disabled until
        you switch them on:
      </p>
      <div class="p-code-snippet">
        <pre class="p-code-snippet__block">
$ sudo pro attach [YOUR_TOKEN]
Enabling default service esm-infra
Updating package lists
Ubuntu Pro: ESM Infra enabled
Enabling default service livepatch
Canonical livepatch enabled.
Unable to determine current instance-id
This machine is now attached to 'Ubuntu Pro - free personal subscription'

SERVICE          ENTITLED  STATUS    DESCRIPTION
esm-apps         <span class="token string">yes</span>       <span class="token string">enabled</span>   Expanded Security Maintenance for Applications
esm-infra        <span class="token string">yes</span>       <span class="token string">enabled</span>   Expanded Security Maintenance for Infrastructure
fips             <span class="token string">yes</span>       <span class="token string">disabled</span>  NIST-certified core packages
fips-updates     <span class="token string">yes</span>       <span class="token string">disabled</span>  NIST-certified core packages with priority security updates
livepatch        <span class="token string">yes</span>       <span class="token string">enabled</span>   Canonical Livepatch service
usg              <span class="token string">yes</span>       <span class="token string">disabled</span>  Security compliance and audit tools

NOTICES
Operation in progress: pro attach

Enable services with: pro enable &lt;service&gt;
Account: [YOUR_EMAIL]
Subscription: Ubuntu Pro - free personal subscription</pre>
      </div>

      <p>This output will depend on your Ubuntu LTS version; for instance 'fips', 'fips-updates' and 'usg' are not yet
        available on Ubuntu 22.04 LTS.</p>
      <p>For Ubuntu Desktop, you can go to “Software & Updates” and open the "Ubuntu Pro" tab.</p>
      <img class="has-shadow" src="https://assets.ubuntu.com/v1/9319d303-software_updates_pro.png" alt=""
        style="width: 100%; max-width: 81rem">
      <p>Then you can click the “Enable Ubuntu Pro” button. You can then copy paste the token into “add token manually”.
      </p>
      <img class="has-shadow" src="https://assets.ubuntu.com/v1/8c3fd6d1-magic_attach_visual_aid_desktop.png" alt=""
        style="width: 100%; max-width: 81rem">
      <p>Alternatively, you can pick the code displayed and paste it on <a href="/pro/attach">ubuntu.com/pro/attach</a>
      </p>
      <img class="has-shadow" src="https://assets.ubuntu.com/v1/582bec22-magic_attach_web.png" alt=""
        style="width: 100%; max-width: 81rem">
    </div>
  </div>
  </div>
</section>

<section class="p-strip u-no-padding--top">
  <hr class="is-fixed-width u-no-margin--bottom">
  <div class="row">
    <div class="col-3">
      <p class="p-step-counter">
        5
      </p>
    </div>
    <div class="col-9">
      <h2>Congratulations - your machine is now upgraded to Ubuntu Pro</h2>

      <p>Well done! Your machine now has access to Ubuntu Pro repositories. That means that every time you update
        your software, you will be pulling from the Ubuntu Pro’s Expanded Security Maintenance repositories. You can get
        it through all the usual paths; nothing new to learn. You can use unattended-upgrades, the Software Updater on
        the Desktop, or <code>apt upgrade</code> command in the CLI.</p>

      <p>To ensure that all available CVE fixes are applied, run:
      <pre><code> $ sudo apt update && sudo apt upgrade</code></pre>
      </p>
    </div>
  </div>
</section>

<section class="p-strip u-no-padding--top">
  <hr class="is-fixed-width u-no-margin--bottom">
  <div class="row">
    <div class="col-3">
      <p class="p-step-counter">
        6
      </p>
    </div>
    <div class="col-9">
      <h2>What else can you use your Ubuntu Pro subscription for?</h2>

      <p>For users running in regulated environments, we have a set of FIPS-certified crypto-modules and hardening
        scripts available. To enable them, consider enabling other Pro services you are entitled to, such as the Ubuntu
        Security Guide.</p>

      <p>
      <pre><code>$ sudo pro enable usg</code></pre>
      </p>
    </div>
  </div>
</section>

<section class="p-strip u-no-padding--top">
  <hr class="is-fixed-width u-no-margin--bottom">
  <div class="row">
    <div class="col-3">
      <p class="p-step-counter">
        7
      </p>
    </div>
    <div class="col-9">
      <h2>That's all, folks</h2>

      <p>Good job, you made it! You should now know how to access and use Ubuntu Pro, as well as understand all the
        great benefits Ubuntu Pro has to offer.</p>

      <h3 class="p-heading--5">Next steps:</h3>

      <p>Still hungry to learn more about Ubuntu Pro? <a href="/contact-us/form?product=pro">Talk to the Canonical team</a> or head on over to <a
          href="https://discourse.ubuntu.com/c/ubuntu-pro/">Ubuntu Pro Discourse</a>.</p>
    </div>
  </div>
</section>
{% endblock %}
{% endblock %}