{% extends "credentialing/base_cube.html" %}

{% block title %} Microcertifications | CUBE {% endblock %}

{% block meta_description %}Follow the path to certification - complete the 15 microcerts to attain CUBE.{% endblock meta_description %}
{% block meta_copydoc %}https://docs.google.com/document/d/1IHmr2SIxcEKVNN2sA-z_32PV0fCXi38pmeVP7k7O1mM/edit{% endblock meta_copydoc %}

{% block content %}

<section class="p-strip--square-suru has-cube is-dark is-slanted--bottom-left js-cube-hero">
  <div class="row u-equal-height u-vertically-center">
    <div class="col-6 js-hero-content">
      {% if certified_badge %}
        <h1>CUBE 2020 complete</h1>
        <p class="p-heading--4">You have completed all {{ modules|length }} microcerts, proving your Ubuntu expertise. You are now a Certified Ubuntu Engineer.</p>
      {% elif has_enrollments %}
        <h1>Your road to CUBE</h1>
        {% if passed_courses > 0 %}
        <p class="p-heading--4">You have completed {{ passed_courses }} microcerts.</br>Complete {{ (modules|length - passed_courses) }} more microcerts to attain CUBE.</p>
        {% else %}
        <p class="p-heading--4">Complete {{ modules|length }} microcerts to attain CUBE.</p>
        {% endif %}
      {% else %}
        <h1>The road to CUBE</h1>
        <p class="p-heading--4">The path to certification is clear and convenient. Complete 15 microcerts to attain CUBE.</p>
        <a href="/credentialing/contact-us" class="p-button--positive js-invoke-modal">Apply for access</a></br>
      {% endif %}
    </div>
    <div class="col-6 p-cube-progression u-hide--medium u-hide--small">
      <div class="p-cube-progression is-architecture {% if modules[0].status != 'passed' %}is-faded{% endif %}"></div>
      <div class="p-cube-progression is-bash {% if modules[4].status != 'passed' %}is-faded--right{% endif %}"></div>
      <div class="p-cube-progression is-devices {% if modules[3].status != 'passed' %}is-faded--left{% endif %}"></div>
      <div class="p-cube-progression is-packages {% if modules[1].status != 'passed' %}is-faded{% endif %}"></div>
      <div class="p-cube-progression is-services {% if modules[6].status != 'passed' %}is-faded--right{% endif %}"></div>
      <div class="p-cube-progression is-admin {% if modules[5].status != 'passed' %}is-faded--left{% endif %}"></div>
      <div class="p-cube-progression is-commands {% if modules[2].status != 'passed' %}is-faded{% endif %}"></div>
      <div class="p-cube-progression is-security {% if modules[8].status != 'passed' %}is-faded--right{% endif %}"></div>
      <div class="p-cube-progression is-networking {% if modules[7].status != 'passed' %}is-faded--left{% endif %}"></div>
      <div class="p-cube-progression is-kernel {% if modules[9].status != 'passed' %}is-faded{% endif %}"></div>
      <div class="p-cube-progression is-microk8s {% if modules[12].status != 'passed' %}is-faded--right{% endif %}"></div>
      <div class="p-cube-progression is-virtualisation {% if modules[11].status != 'passed' %}is-faded--left{% endif %}"></div>
      <div class="p-cube-progression is-storage {% if modules[10].status != 'passed' %}is-faded{% endif %}"></div>
      <div class="p-cube-progression is-juju {% if modules[14].status != 'passed' %}is-faded--right{% endif %}"></div>
      <div class="p-cube-progression is-maas {% if modules[13].status != 'passed' %}is-faded--left{% endif %}"></div>
    </div>
  </div>
</section>

{% if certified_badge %}

<section class="p-strip--light is-slanted--top-right">
  <div class="row">
    <div class="col-3 col-start-large-2 u-hide--small">
      {{ image (
        url="https://assets.ubuntu.com/v1/17541ecf-CUBE+certified+-+132x190_3.svg",
        alt="CUBE certified",
        width="175",
        height="252",
        hi_def=True,
        loading="auto"
        ) | safe
      }}
    </div>
    <div class="col-7">
      <h2>Badge of honor</h2>
      <p style="margin-bottom:0.5rem;">Share your certification with your network</p>
      <ul class="p-inline-list-icons u-no-padding--left u-no-margin--left u-no-padding--top">
        <li class="p-inline-list__item">
          <a title="Share on Twitter" href="https://twitter.com/share?text=I am officially a Certified Ubuntu Engineer. My CUBE 2020 from @Canonical means that Iâ€™m a proven @Ubuntu professional. Learn more about CUBE 2020 at https://www.ubuntu.com/cube&amp;url={{ certified_badge.image }}&amp;hashtags=CUBE2020">
          {{ image (
            url="https://assets.ubuntu.com/v1/6d51a38d-Twitter.png",
            alt="",
            width="61",
            height="20",
            hi_def=True,
            loading="auto"
            ) | safe
          }}
          </a>
        </li>
        <li class="p-inline-list__item">
          <a title="Share on LinkedIn" href="https://www.linkedin.com/shareArticle?url={{ certified_badge.image }}&title=CUBE 2020">
          {{ image (
            url="https://assets.ubuntu.com/v1/72040dde-LindedIn.png",
            alt="",
            width="60",
            height="20",
            hi_def=True,
            loading="auto"
            ) | safe
          }}
        </a>
        </li>
      </ul>
      <p>You can <a href="https://www.linkedin.com/profile/add?startTask=CERTIFICATION_NAME&name=CUBE 2020&organizationName=Canonical&certUrl={{ certified_badge.image }}">add this badge</a> to the Certification section of your LinkedIn profile.</p>
      <p class="u-no-padding--top"><small>{{ certified_badge.image }}</small></p>
    </div>
  </div>
</section>

{% elif has_enrollments %}

<section class="p-strip--light is-slanted--top-right is-shallow">
  <div class="row">
    <div class="col-5" style="margin-top: 3rem;">
      <h2>Refresh your knowledge</h2>
      <p><strong>Be prepared for every microcert</strong></p>
      <p class="u-sv2">Check your baseline understanding of Ubuntu fundamentals and preview the exam experience in a practice environment.</p>
      {% if has_study_labs %}
      <a href="{{ study_labs_url }}" class="p-button--positive">Prepare</a>
      {% else %}
      <a href="/credentialing/contact-us" class="p-button--positive cube-access js-invoke-modal">Apply for access</a>
      {% endif %}
    </div>
  </div>
</section>

{% endif %}

{% if certified_badge %}

<section class="p-strip">
  <div class="u-fixed-width">
    <h2>Microcertification history</h2>
    <table class="p-table--cube is-passed">
      <thead>
          <tr>
            <th>#</th>
            <th class="u-hide--small"></th>
            <th>Module</th>
            <th class="p-table__cell--icon-placeholder">Status</th>
          </tr>
        </thead>
        <tbody>
        {% for module in modules %}
        <tr>
          <td data-heading="Module number">
            <div class="p-table--cube__contents">
              <p class="u-text--muted">{{ loop.index }}</p>
            </div>
          </td>
          <td class="u-hide--small u-no-padding--left u-no-padding--right" data-heading="Badge">
              <img 
                src="{{ module['badge-url'] }}"
                alt="Badge for {{ module.name }}"
                style="margin-left: -0.2rem;"
              >
          </td>
          <td data-heading="Module">
            <div class="p-table--cube__contents">
              <h5>{{ module.name }}</h5>
            </div>
            <p class="u-text--muted u-hide--small">
              <small>{{ module.topics|length }} topics</small>
            </p>
          </td>
          <td class="p-table__cell--icon-placeholder" data-heading="Status">
            <div class="p-table--cube__contents">
              <p>
                <i class="p-icon--success"></i>Passed
              </p>
            </div>
            <p class="u-text--muted u-hide--small">
              <small>{{ module.date_attempted }}</small>
            </p>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</section>

{% else %}

<section class="p-strip">
  <div class="u-fixed-width">
    <h2>Microcertifications</h2>
    <table class="p-table--cube p-table--mobile-card">
      <thead>
        <tr>
          <th>#</th>
          <th></th>
          <th>Module</th>
          <th>Topics</th>
          {% if has_enrollments %}
          <th class="p-table__cell--icon-placeholder">Status</th>
          <th class="u-align--right">Action</th>
          {% else %}
          <th></th>
          <th></th>
          {% endif %}
        </tr>
      </thead>
      <tbody>
      {% for module in modules %}
        <tr>
          <td class="u-vertically-center" data-heading="Module number">
            <div class="p-table--cube__contents">
              <p class="u-text--muted" style="margin-bottom: auto; margin-top: auto;" >{{ loop.index }}</p>
            </div>
          </td>
          <td class="p-table--cube__badge-column" data-heading="Badge">
            <img
              class="p-table--cube__badge"
              src="{{ module['badge-url'] }}"
              alt="Badge for {{ module.name }}"
              {% if module.status == 'passed' %}
              style="margin-left: -0.2rem;"
              {% endif %}
            />
          </td>
          <td data-heading="Module">
            <!-- inline style here and line 230 can be removed when this is fixed https://github.com/canonical-web-and-design/vanilla-framework/issues/3754 -->
            <div class="p-table--cube__contents" style="white-space: normal">
              <h5>{{ module.name }}</h5>
            </div>
            <p class="u-text--muted u-hide--small">
              <small>{{ module.topics|length }} topics</small>
            </p>
          </td>
          <td data-heading="Topics">
            <div class="p-table--cube__contents">
              <ul class="p-list u-no-margin" style="white-space: normal">
                {% for topic in module.topics %}
                <li class="p-list__item">{{ topic }}</li>
                {% endfor %}
              </ul>
            </div>
          </td>
          <td class="p-table__cell--icon-placeholder" data-heading="Status">
            <div class="p-table--cube__contents">
              {% if module.status == "passed" %}
              <p>
                <i class="p-icon--success"></i>Passed
              </p>
              {% elif module.status == "failed" %}
              <p>
                <i class="p-icon--error"></i>Failed
              </p>
              {% elif module.status == "enrolled" %}
              <p>
                Enrolled
              </p>
              {% elif module.status == "not-enrolled" %}
              <p>
                Not Enrolled
              </p>
              {% elif module.status == "in-progress" %}
              <p>
                In progress
              </p>
              {% endif %}
            </div>
          </td>
          {% if module.status == "passed" %}
          <td data-heading="Action" class="p-table__cell--share-actions u-hide--small">
          <div class="p-share-button u-align--right">
            <span class="p-contextual-menu p-contextual-menu--right u-hide--small">
              <button class="p-button p-contextual-menu__toggle has-icon u-no-margin--bottom" aria-controls="#share-menu" aria-expanded="false" aria-haspopup="true" data-trigger="click"><i class="p-icon--chevron-down p-contextual-menu__indicator"></i><span>Share</span></button>
              <span class="p-contextual-menu__dropdown" id="share-menu" aria-hidden="true">
                <span class="p-contextual-menu__group">
                  <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url={{ module['badge-url'] }}" class="p-contextual-menu__link">Share via LinkedIn</a>
                  <a href="https://twitter.com/share?text=I earned {{ module.name }} from @Canonical. Now Iâ€™m one step closer to becoming a Certified @Ubuntu Engineer. Learn more about Canonicalâ€™s available microcerts and CUBE 2020 at https://www.ubuntu.com/cube.&amp;url={{ module['badge-url'] }}&amp;hashtags=CUBE2020" class="p-contextual-menu__link">Share via Twitter</a>
                  <a data-badge="{{ module['badge-url'] }}" class="p-contextual-menu__link copy-to-clipboard">Copy to clipboard</a>
                </span>
              </span>
            </span>
          </div>
          </td>
          {% elif module.status == "enrolled" %}
          <td>
            <div class="p-table--cube__contents u-align--right">
              {% if has_study_labs %}
              <a class="p-button u-no-margin--right" href="{{ module.study_lab }}">Prepare</a>
              {% endif %}
              <a style = "margin-left: 1rem;" class="p-button--positive" href="{{ module.take_url }}">Take</a>
            </div>
          </td>
          {% elif module.status == "failed" %}
          <td>
            <div class="p-table--cube__contents u-align--right">
              <a class="p-button u-no-margin--right" href="https://support.canonical.com">Request retry</a>
            </div>
          </td>          
          {% elif module.status == "not-enrolled" %}
          <td>
            <div class="p-table--cube__contents u-align--right">
              <a href="/credentialing/contact-us" class="p-button--positive cube-access js-invoke-modal">Apply for access</a>
            </div>
          </td>
          {% elif module.status == "in-progress" %}
          <td>
            <div class="p-table--cube__contents u-align--right">
              <a style = "margin-left: 1rem;" class="p-button--positive" href="{{ module.take_url }}">Resume</a>
            </div>
          </td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endif %}

{% if has_enrollments %}

<section class="p-strip--square-suru has-cube is-slanted--top-right">
  <div class="u-fixed-width">
    <h2>Thank you for joining the beta</h2>
    <p>Canonical are grateful for your participation. We look forward to hearing your feedback.</p>
  </div>
</section>

{% else %}

<section class="p-strip--square-suru has-cube is-slanted--top-right">
  <div class="u-fixed-width">
    <h2>Apply for beta access</h2>
    <p>Canonical are seeking participants from the community for the CUBE beta test. If you would like to be considered for the beta, please enter your information in the form below. Canonical will reach out to you if you are selected.</p>
    <a href="/credentialing/contact-us" class="p-button--positive cube-access js-invoke-modal">Apply for access</a>
  </div>
</section>

{% endif %}

{% if not edx_user %}
<div class="p-modal" id="modal">
  <section class="p-modal__dialog" role="dialog">
    <header class="p-modal__header">
      <h2 class="p-modal__title" id="modal-title">edX Account</h2>
    </header>
    <p>In order to use CUBE you will need to create an account with edX. By clicking the button below you are accepting the <a href="/legal/terms-and-policies/cube-terms" target="_blank" rel="noopener noreferrer">terms of service</a> and an account will be created for you.</p>
    <footer class="p-modal__footer">
      <a class="p-button p-button--positive u-no-margin--bottom" href="{{edx_register_url}}">Accept and register</a>
    </footer>
  </section>
</div>
{% endif %}

<!-- Set default Marketo information for contact form below-->
<div class="u-hide" id="contact-form-container" data-form-location="/shared/forms/interactive/cube-beta" data-form-id="3801" data-lp-id="7140" data-return-url="https://ubuntu.com/cube/thank-you" data-lp-url="https://pages.ubuntu.com/Contact_Us_Ubuntu_CUBEbetatest_Cube-contact-us-landing-page.html">
</div>

<script >
const myObserver = new ResizeObserver((entries) => {
  entries.forEach((entry) => {
    const width = Math.floor(entry.contentRect.width);
    if (width < 1035) {
      entry.target.classList.remove("is-shallow");
      document.querySelector(".js-hero-content").style.marginTop = "2rem";
    } else {
      entry.target.classList.add("is-shallow");
      document.querySelector(".js-hero-content").style.marginTop = "-2rem";
    }
  });
});

const strip = document.querySelector(".js-cube-hero");
myObserver.observe(strip);


function copyBadgeUrl(badgeUrl) {
  const el = document.createElement('textarea');
  el.value = badgeUrl;
  el.setAttribute('readonly', '');
  el.style.position = 'absolute';
  el.style.left = '-9999px';
  document.body.appendChild(el);
  el.select();
  document.execCommand('copy');
  document.body.removeChild(el);
}

const copyToClipboardLinks = document.querySelectorAll(".copy-to-clipboard");
const linksArr = Array.from(copyToClipboardLinks);
linksArr.forEach(link => {
  const badgeUrl = link.dataset.badge;
  link.addEventListener("click", () => copyBadgeUrl(badgeUrl));
});
</script>


{% endblock content %}
