{% extends "kubernetes/base_kubernetes.html" %}

{% from "_macros/vf_hero.jinja" import vf_hero %}

{% block title %}Install Kubernetes{% endblock %}

{% block meta_description %}
  A step-by-step guide to install Kubernetes on your software defined infrastructure from workstations, to clouds, edge and IoT devices.
{% endblock meta_description %}

{% block meta_copydoc %}
  https://docs.google.com/document/d/1oiD6UUomf2daZitS3UOosujYBXPbiOMzPtXVZBq-ph0/edit
{% endblock meta_copydoc %}

{% block body_class %}
  is-paper
{% endblock body_class %}

{% block content %}

  {% call(slot) vf_hero(
    title_text='Install Kubernetes',
    layout='50/50'
    ) -%}
    {%- if slot == 'description' -%}
      <p>
        Canonical Kubernetes is pure upstream and works on any infrastructure, from bare metal to public clouds and edge. Deploy single-node and multi-node clusters to support container orchestration, from testing to production. Get the latest innovations from the Kubernetes community within a week of upstream release, enabling your team to learn, experiment and upskill.
      </p>
    {%- endif -%}
    {%- if slot == 'cta' -%}
      <a href="/kubernetes/docs" class="p-button--positive">Read the docs</a>
      <a href="/pro/subscribe">Purchase support with Ubuntu Pro&nbsp;&rsaquo;</a>
    {%- endif -%}
    {%- if slot == 'image' -%}
      <div class="p-image-container--3-2 is-cover u-hide--medium u-hide--small">
        {{ image(url="https://assets.ubuntu.com/v1/224cce53-install-kubernetes.png",
                alt="",
                width="1800",
                height="1200",
                hi_def=True,
                loading="auto",
                attrs={"class": "p-image-container__image"}) | safe
        }}
      </div>
    {%- endif -%}
  {% endcall -%}

  <section class="p-section">
    <hr class="is-fixed-width p-rule" />
    <div class="row--50-50-on-large">
      <div class="col">
        <h2>Kubernetes cluster with K8s snap</h2>
      </div>
      <div class="col">
        <div class="p-tabs js-tabbed-content">
          <div class="p-tabs__list"
               role="tablist"
               aria-label="Single-node and multi-node">
            <div class="p-tabs__item">
              <button class="p-tabs__link"
                      role="tab"
                      aria-selected="true"
                      aria-controls="single-node-tab"
                      id="single-node">Single-node</button>
            </div>
            <div class="p-tabs__item">
              <button class="p-tabs__link"
                      role="tab"
                      aria-selected="false"
                      aria-controls="multi-node-tab"
                      id="multi-node"
                      tabindex="-1">Multi-node</button>
            </div>
          </div>

          <div tabindex="0"
               role="tabpanel"
               id="single-node-tab"
               aria-labelledby="single-node">
            <div class="p-section--shallow">
              <p>
                Install Kubernetes with a single command. Canonical Kubernetes comes with in-built networking, gateway, local storage, DNS, load balancer, metrics server and ingress.
              </p>
              <div class="p-cta-block">
                <a href="https://documentation.ubuntu.com/canonical-kubernetes/latest/src/snap/">Read the docs to learn more</a>
              </div>
            </div>

            <ol class="p-stepped-list--detailed u-no-margin--bottom">
              <li class="p-stepped-list__item">
                <div>
                  <p class="p-stepped-list__title p-heading--5">Install the K8s snap</p>
                </div>
                <div>
                  <div class="p-stepped-list__content">
                    <div class="p-code-snippet u-sv-2">
                      <pre class="p-code-snippet__block--icon"><code>sudo snap install k8s --classic</code></pre>
                    </div>
                    <p>
                      Donâ€™t have the snap command? <a href="https://docs.snapcraft.io/installing-snapd"
    aria-label="Learn more about snapd installation">Get set for snaps</a>
                    </p>
                  </div>
                </div>
              </li>
              <li class="p-stepped-list__item">
                <div>
                  <p class="p-stepped-list__title p-heading--5">Bootstrap the cluster</p>
                </div>
                <div>
                  <div class="p-stepped-list__content">
                    <div class="p-code-snippet">
                      <pre class="p-code-snippet__block--icon"><code>sudo k8s bootstrap</code></pre>
                    </div>
                  </div>
                </div>
              </li>
              <li class="p-stepped-list__item">
                <div>
                  <p class="p-stepped-list__title p-heading--5">View status of your installation</p>
                </div>
                <div>
                  <div class="p-stepped-list__content">
                    <div class="p-code-snippet">
                      <pre class="p-code-snippet__block--icon"><code>sudo k8s status</code></pre>
                    </div>
                  </div>
                </div>
              </li>
              <li class="p-stepped-list__item">
                <div>
                  <p class="p-stepped-list__title p-heading--5">Start using Kubernetes</p>
                </div>
                <div>
                  <div class="p-stepped-list__content">
                    <div class="p-code-snippet">
                      <pre class="p-code-snippet__block--icon"><code>sudo k8s kubectl get all --all-namespaces</code></pre>
                    </div>
                  </div>
                </div>
              </li>
            </ol>
          </div>

          <div tabindex="0"
               role="tabpanel"
               id="multi-node-tab"
               aria-labelledby="multi-node">
            <div class="p-section--shallow">
              <p>
                To create a cluster out of two or more already-running Kubernetes instances, use the <i>k8s join-cluster</i> command. With three or more control plane nodes you will automatically get high availability.
              </p>
              <div class="p-cta-block">
                <a href="https://documentation.ubuntu.com/canonical-kubernetes/latest/src/snap/"
                   aria-label="Check out Kubernetes documentation">Read the docs to learn more</a>
              </div>
            </div>

            <ol class="p-stepped-list--detailed u-no-margin--bottom">
              <li class="p-stepped-list__item">
                <div>
                  <p class="p-stepped-list__title p-heading--5">
                    Generate token on the already existing <i>control-plane</i> node
                  </p>
                </div>
                <div>
                  <div class="p-stepped-list__content">
                    <div class="p-code-snippet">
                      <pre class="p-code-snippet__block--icon"><code>sudo k8s get-join-token --worker</code></pre>
                    </div>
                  </div>
                </div>
              </li>
              <li class="p-stepped-list__item">
                <div>
                  <p class="p-stepped-list__title p-heading--5">
                    To join the worker node to the cluster, run on the <i>worker</i> node
                  </p>
                </div>
                <div>
                  <div class="p-stepped-list__content">
                    <div class="p-code-snippet">
                      <pre class="p-code-snippet__block--icon"><code>sudo k8s join-cluster &lt;join-token&gt;</code></pre>
                    </div>
                  </div>
                </div>
              </li>
              <li class="p-stepped-list__item">
                <div>
                  <p class="p-stepped-list__title p-heading--5">
                    Verify the worker node successfully joined the cluster, by running on the <i>control-plane</i> node
                  </p>
                </div>
                <div>
                  <div class="p-stepped-list__content">
                    <div class="p-code-snippet u-sv-2">
                      <pre class="p-code-snippet__block--icon"><code>sudo k8s kubectl get nodes</code></pre>
                    </div>
                  </div>
                </div>
              </li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="p-section">
    <div class="row--50-50">
      <hr class="p-rule" />
      <div class="col">
        <h2>Multi-node Kubernetes cluster with K8s charm</h2>
      </div>
      <div class="col">
        <p>
          Get automated Kubernetes operations from bare-metal to the cloud. Build your Kubernetes cluster from the ground up, integrate it with your favorite tools, and create multi-cloud topologies.
        </p>
        <div class="p-cta-block">
          <a href="https://documentation.ubuntu.com/canonical-kubernetes/latest/src/charm/tutorial/getting-started/"
             aria-label="Get started with Juju">Install Canonical Kubernetes with Juju</a>
        </div>
      </div>
    </div>
  </section>

  <section class="p-section">
    <div class="row--50-50">
      <hr class="p-rule" />
      <div class="col">
        <h2>
          Multi-node Kubernetes
          <br />
          with Cluster API
        </h2>
      </div>
      <div class="col">
        <p>
          With Canonical Kubernetes you can deploy and operate Kubernetes through Cluster API (CAPI) bootstrap and infrastructure providers.
        </p>
        <div class="p-cta-block">
          <a href="https://documentation.ubuntu.com/canonical-kubernetes/latest/src/capi/tutorial/getting-started/"
             aria-label="Learn more about Kubernetes deployment with Cluster API">Deploy Canonical Kubernetes with Cluster API</a>
        </div>
      </div>
    </div>
  </section>

  <hr class="is-fixed-width p-rule" />
  <section class="p-strip is-deep">
    <div class="u-fixed-width">
      <h2>
        For more information, <a href="/kubernetes/docs" aria-label="Check out the docs">read the docs</a>
        <br />
        Or <a href="/kubernetes/contact-us" class="js-invoke-modal">contact us</a> to let our experts help you take the next step
      </h2>
    </div>
  </section>

  <!-- Set default Marketo information for contact form below-->
  <div class="u-hide"
       id="contact-form-container"
       data-form-location="/shared/forms/interactive/kubernetes"
       data-form-id="3230"
       data-lp-id="6274"
       data-return-url="/kubernetes#success"
       data-lp-url="https://pages.ubuntu.com/things-contact-us.html"
       data-title="Get your Kubernetes clusters running"></div>

{% endblock content %}
