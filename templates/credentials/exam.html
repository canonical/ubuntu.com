{% extends "credentials/base_exam.html" %}

{% block title %}Canonical Credentials -- Exam{% endblock %}

{% block meta_description %}The Canonical Ubuntu Essentials exams certify knowledge and verify skills in general Linux, Ubuntu Desktop, and Ubuntu Server topics.{% endblock meta_description %}
{% block meta_copydoc %}https://docs.google.com/document/d/1QuhO-9FEOGLrYp8bErS_9snqdljl7d6tFAUoNQxoVDQ/edit{% endblock meta_copydoc %}

{% block content %}

<section class="p-strip u-no-padding">
  <iframe title="Exam" class="u-no-margin" id="exam-iframe" onload="setIframeHeight()" scrolling="no" width="100%" src="{{ url }}"></iframe>
</section>

<script>
  const setIframeHeight = () => {
    // TODO: Account for header height change
    const navHeight = document.getElementById("navigation").clientHeight;
    const container = document.getElementById("exam-iframe");
    container.style.height = `${window.innerHeight - navHeight - 32 - 4}px`;
    console.log(`navHeight: ${navHeight}`);
    console.log(`innerHeight: ${innerHeight}`);
    console.log(`containerHeight: ${container.style.height}`);
    console.log("container", container);
  }

  // window.onresize = setIframeHeight;

  const refocusIframe = () => {
    const iframe = document.getElementById("exam-iframe");
    const focused = document.activeElement;
    if (focused && focused !== document.body) {
      return;
    }

    iframe.contentWindow.focus();
  }

  document.addEventListener('click', refocusIframe);
  document.addEventListener('keydown', refocusIframe);
</script>

{% endblock content%}
