{% extends "advantage/base_advantage.html" %}

{% block title %}Ubuntu Advantage for Infrastructure{% endblock %}
{% block meta_description %}Ubuntu Advantage for Infrastructure offers a single, per-node packaging of the most comprehensive software, security and IaaS support in the industry, with OpenStack support, Kubernetes support included, and Livepatch, Landscape and Extended Security Maintenance to address security and compliance concerns.{% endblock %}
{% block meta_copydoc %}https://docs.google.com/document/d/1So3n5HEpBX39xxEkkChnve09gKSr9TgYUcbfdOTCevk/edit{% endblock meta_copydoc %}

{% block content %}

{% if user_info %}
  <section class="p-strip--suru-topped u-no-padding--bottom">
    <script>
      dataLayer.push({
        'event' : 'GAEvent',
        'eventCategory' : 'Advantage',
        'eventAction' : 'Authentication',
        'eventLabel' : 'Logged in',
        'eventValue' : undefined
      });
    </script>

    <div class="row">
      <div class="col-12 p-subscriptions__header">
        <h1 class="u-no-margin--bottom">Your subscriptions</h1>
        <div class="p-subscriptions__header-buttons">
          <a class="p-button--positive" href="/advantage/subscribe{% if get_test_backend %}?test_backend=true{% endif %}">Buy new subscription</a>
          <a class="p-button--neutral" href="/account/invoices{% if get_test_backend %}?test_backend=true{% endif %}">Invoices</a>
          <a class="p-button--neutral" href="/account/payment-methods{% if get_test_backend %}?test_backend=true{% endif %}">Payment methods</a>
        </div>
      </div>
    </div>
  </section>

  {% if pending_purchase_id %}
  <div class="row">
    <div class="p-notification--caution">
      <p class="p-notification__response" role="status">
        <span class="p-notification__status">Payment method:</span>You need to <a href="/account/payment-methods{% if get_test_backend %}?test_backend=true{% endif %}">update your payment methods</a> to ensure there is no interruption to your Ubuntu Advantage subscriptions
      </p>
    </div>
  </div>
  {% endif %}

  <div id="react-root">
    <section class="p-strip">
      <div class="row">
        <div class="col-12"><i class="p-icon--spinner u-animation--spin"></i> Loading&hellip;</div>
      </div>
    </section>
  </div>
{% endif %}

<script>
  window.enterpriseContracts = {{ enterprise_contracts|tojson }};
  window.pendingPurchaseId = "{{ pending_purchase_id }}";
  window.personalAccount = {{ personal_account|tojson }};
</script>

<script
  src="{{ versioned_static('js/dist/uaSubscriptions.js') }}"
  type="module"
  defer
></script>

{% with first_item="_ua_got_questions", second_item="_ua_legal", third_item="_ua_further_reading" %}{% include "shared/contextual_footers/_contextual_footer.html" %}{% endwith %}

{% endblock content %}
