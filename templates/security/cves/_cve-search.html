<form id="searchForm">
  <div class="row">
    <div class="col-7 col-medium-4">
      <label for="q">CVE ID or description contains:</label>
      <input type="text" name="q" id="q" value="{{ query or '' }}" />
    </div>
    <div class="col-2 col-medium-2">
      <button type="submit" class="p-button--positive" id="cve-search-button">
        <span class="cve-search-text">Search</span>
      </button>
    </div>
  </div>
</form>

<script>
  function handleSubmitEvent() {
    const submitButton = document.querySelector("#cve-search-button");
    const form = document.querySelector("#searchForm");
    const spinnerIcon = document.createElement("i");
    
    if (submitButton) {
      form.addEventListener("submit", (e) => {
        attachLoadingSpinner(submitButton, spinnerIcon);
      });
    }
  }

  function attachLoadingSpinner(submitButton, spinnerIcon) {
    spinnerIcon.className = "p-icon--spinner u-animation--spin is-light";
    submitButton.classList.add("is-processing");
    submitButton.disabled = true;
    submitButton.innerText = "";
    submitButton.appendChild(spinnerIcon);
  }

  window.addEventListener("DOMContentLoaded", handleSubmitEvent);
</script>