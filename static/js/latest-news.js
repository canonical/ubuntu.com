var canonicalLatestNews=function(e){"use strict";function a(){var e=document.querySelector("[data-js='latest-news']");e&&e.classList.remove("u-hide")}function w(e){var t=new Date(e);return t.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getFullYear()}function l(e,t,r){var n,a,i,l=L(t),d=l.querySelector(".article-time"),o=l.querySelector(".article-link"),c=l.querySelector(".article-title"),s=l.querySelector(".article-image"),u=l.querySelector(".article-author"),h=l.querySelector(".article-excerpt"),m=l.querySelector(".article-group"),p="",g=document.createElement("a");if(r.hostname&&(p="https://"+r.hostname),e._embedded&&e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0]&&e._embedded["wp:featuredmedia"][0].media_details&&e._embedded["wp:featuredmedia"][0].media_details.width&&e._embedded["wp:featuredmedia"][0].media_details.height&&(a={url:(n=e._embedded["wp:featuredmedia"][0]).source_url,alt:n.alt_text,width:n.media_details.width,height:n.media_details.height}),u&&(u.innerHTML=e.author.name),h)if(r.excerptLength){var f=e.excerpt.rendered;if(f.length<=r.excerptLength)h.innerHTML=f;else{var b=f.lastIndexOf(" ",r.excerptLength);-1===b&&(b=r.excerptLength);for(var v=(f=f.substring(0,b)).length-1;0<=v&&!/[a-zA-Z0-9]/.test(f[v]);v--)f=f.substring(0,v);h.innerHTML=f+"&hellip;"}}else h.innerHTML=e.excerpt.rendered;return m&&(m.innerHTML=e.group.name),d&&(d.setAttribute("datetime",e.date),d.innerText=w(e.date)),o&&(o.href=p+"/blog/"+e.slug,r.gtmEventLabel&&(o.onclick=function(){dataLayer.push({event:"GAEvent",eventCategory:"blog",eventAction:r.gtmEventLabel+" news link",eventLabel:e.slug})})),c&&(c.innerHTML=e.title.rendered),s&&a&&r.linkImage&&(g.href=p+"/blog/"+e.slug,s.appendChild(g)),s&&a&&((i=document.createElement("img")).setAttribute("src",a.url),i.setAttribute("alt",a.alt),i.setAttribute("width",a.width),i.setAttribute("height",a.height),r.linkImage?g.appendChild(i):s.appendChild(i)),l}function L(e){var t,r=document.querySelector(e);if("content"in r)t=document.importNode(r.content,!0);else{t=document.createDocumentFragment();for(var n=0;n<r.childNodes.length;n++)t.appendChild(r.childNodes[n].cloneNode(!0))}return t}function i(i){return function(e){var t=document.querySelector(i.articlesContainerSelector);if(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild);var r,n,a=JSON.parse(e.target.responseText);"spotlightContainerSelector"in i&&((r=document.querySelector(i.spotlightContainerSelector))?(n=a.latest_pinned_articles[0])&&r.appendChild(l(n,i.spotlightTemplateSelector,i)):console.warn("latest-news: No spotlight container found")),a.latest_articles&&a.latest_articles.forEach(function(e){t.appendChild(l(e,i.articleTemplateSelector,i))})}else console.warn("latest-news: No articles container found")}}function t(e){var t="https://ubuntu.com/blog/latest-news",r=[];a(),e.limit&&r.push("limit="+e.limit),e.tagIds?e.tagIds.split(",").map(function(e){return e.trim()}).forEach(function(e){r.push("tag-id="+encodeURIComponent(e))}):void 0!==e.tagId&&r.push("tag-id="+encodeURIComponent(e.tagId)),e.groupId&&r.push("group-id="+e.groupId),r.length&&(t+="?"+r.join("&"));var n=new XMLHttpRequest;n.addEventListener("load",i(e)),n.open("GET",t),n.send()}return void 0===window.fetchLatestNews&&(window.fetchLatestNews=t),e.articleDiv=l,e.fetchLatestNews=t,e.formatDate=w,e.getTemplate=L,e.latestArticlesCallback=i,e.revealSection=a,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=latest-news.js.map
